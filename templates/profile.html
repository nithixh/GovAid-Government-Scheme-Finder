{% extends "base.html" %}

{% block title %}Profile - GovAid{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-{% if role == 'student' %}primary{% else %}success{% endif %} text-white text-center">
                    <h3 class="mb-0">
                        <i class="fas fa-{% if role == 'student' %}graduation-cap{% else %}rocket{% endif %} me-2"></i>
                        {{ role.title() }} Profile
                    </h3>
                </div>
                <div class="card-body">
                    <form method="POST">
                        {% if role == 'student' %}
                            <!-- Student Profile Fields -->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="state" class="form-label">State</label>
                                        <select class="form-control" id="state" name="state" required>
                                            <option value="">Select State</option>
                                            <option value="Andhra Pradesh" {% if profile_data.get('state') == 'Andhra Pradesh' %}selected{% endif %}>Andhra Pradesh</option>
                                            <option value="Delhi" {% if profile_data.get('state') == 'Delhi' %}selected{% endif %}>Delhi</option>
                                            <option value="Karnataka" {% if profile_data.get('state') == 'Karnataka' %}selected{% endif %}>Karnataka</option>
                                            <option value="Maharashtra" {% if profile_data.get('state') == 'Maharashtra' %}selected{% endif %}>Maharashtra</option>
                                            <option value="Tamil Nadu" {% if profile_data.get('state') == 'Tamil Nadu' %}selected{% endif %}>Tamil Nadu</option>
                                            <option value="Uttar Pradesh" {% if profile_data.get('state') == 'Uttar Pradesh' %}selected{% endif %}>Uttar Pradesh</option>
                                            <option value="West Bengal" {% if profile_data.get('state') == 'West Bengal' %}selected{% endif %}>West Bengal</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="category" class="form-label">Category</label>
                                        <select class="form-control" id="category" name="category" required>
                                            <option value="">Select Category</option>
                                            <option value="General" {% if profile_data.get('category') == 'General' %}selected{% endif %}>General</option>
                                            <option value="SC" {% if profile_data.get('category') == 'SC' %}selected{% endif %}>SC</option>
                                            <option value="ST" {% if profile_data.get('category') == 'ST' %}selected{% endif %}>ST</option>
                                            <option value="OBC" {% if profile_data.get('category') == 'OBC' %}selected{% endif %}>OBC</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="annual_income" class="form-label">Annual Family Income (Rs)</label>
                                        <input type="number" class="form-control" id="annual_income" name="annual_income" 
                                               value="{{ profile_data.get('annual_income', '') }}" required>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="dob" class="form-label">Date of Birth</label>
                                        <input type="date" class="form-control" id="dob" name="dob" 
                                               value="{{ profile_data.get('dob', '') }}" required>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="gender" class="form-label">Gender</label>
                                        <select class="form-control" id="gender" name="gender" required>
                                            <option value="">Select Gender</option>
                                            <option value="Male" {% if profile_data.get('gender') == 'Male' %}selected{% endif %}>Male</option>
                                            <option value="Female" {% if profile_data.get('gender') == 'Female' %}selected{% endif %}>Female</option>
                                            <option value="Other" {% if profile_data.get('gender') == 'Other' %}selected{% endif %}>Other</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="education_level" class="form-label">Education Level</label>
                                        <select class="form-control" id="education_level" name="education_level" required>
                                            <option value="">Select Education Level</option>
                                            <option value="10th" {% if profile_data.get('education_level') == '10th' %}selected{% endif %}>10th Class</option>
                                            <option value="12th" {% if profile_data.get('education_level') == '12th' %}selected{% endif %}>12th Class</option>
                                            <option value="Undergraduate" {% if profile_data.get('education_level') == 'Undergraduate' %}selected{% endif %}>Undergraduate</option>
                                            <option value="Postgraduate" {% if profile_data.get('education_level') == 'Postgraduate' %}selected{% endif %}>Postgraduate</option>
                                            <option value="PhD" {% if profile_data.get('education_level') == 'PhD' %}selected{% endif %}>PhD</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="course" class="form-label">Course/Field of Study</label>
                                <input type="text" class="form-control" id="course" name="course" 
                                       value="{{ profile_data.get('course', '') }}" 
                                       placeholder="e.g., Computer Science, Medicine, Engineering" required>
                            </div>

                        {% else %}
                            <!-- Entrepreneur Profile Fields -->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="state" class="form-label">State</label>
                                        <select class="form-control" id="state" name="state" required>
                                            <option value="">Select State</option>
                                            <option value="Andhra Pradesh" {% if profile_data.get('state') == 'Andhra Pradesh' %}selected{% endif %}>Andhra Pradesh</option>
                                            <option value="Delhi" {% if profile_data.get('state') == 'Delhi' %}selected{% endif %}>Delhi</option>
                                            <option value="Karnataka" {% if profile_data.get('state') == 'Karnataka' %}selected{% endif %}>Karnataka</option>
                                            <option value="Maharashtra" {% if profile_data.get('state') == 'Maharashtra' %}selected{% endif %}>Maharashtra</option>
                                            <option value="Tamil Nadu" {% if profile_data.get('state') == 'Tamil Nadu' %}selected{% endif %}>Tamil Nadu</option>
                                            <option value="Uttar Pradesh" {% if profile_data.get('state') == 'Uttar Pradesh' %}selected{% endif %}>Uttar Pradesh</option>
                                            <option value="West Bengal" {% if profile_data.get('state') == 'West Bengal' %}selected{% endif %}>West Bengal</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="age" class="form-label">Age</label>
                                        <input type="number" class="form-control" id="age" name="age" min="18" max="100"
                                               value="{{ profile_data.get('age', '') }}" required>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="industry_type" class="form-label">Industry Type</label>
                                        <select class="form-control" id="industry_type" name="industry_type" required>
                                            <option value="">Select Industry</option>
                                            <option value="Technology" {% if profile_data.get('industry_type') == 'Technology' %}selected{% endif %}>Technology</option>
                                            <option value="Healthcare" {% if profile_data.get('industry_type') == 'Healthcare' %}selected{% endif %}>Healthcare</option>
                                            <option value="Education" {% if profile_data.get('industry_type') == 'Education' %}selected{% endif %}>Education</option>
                                            <option value="Agriculture" {% if profile_data.get('industry_type') == 'Agriculture' %}selected{% endif %}>Agriculture</option>
                                            <option value="Manufacturing" {% if profile_data.get('industry_type') == 'Manufacturing' %}selected{% endif %}>Manufacturing</option>
                                            <option value="Services" {% if profile_data.get('industry_type') == 'Services' %}selected{% endif %}>Services</option>
                                            <option value="Other" {% if profile_data.get('industry_type') == 'Other' %}selected{% endif %}>Other</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="startup_stage" class="form-label">Startup Stage</label>
                                        <select class="form-control" id="startup_stage" name="startup_stage" required>
                                            <option value="">Select Stage</option>
                                            <option value="idea" {% if profile_data.get('startup_stage') == 'idea' %}selected{% endif %}>Idea Stage</option>
                                            <option value="prototype" {% if profile_data.get('startup_stage') == 'prototype' %}selected{% endif %}>Prototype</option>
                                            <option value="early" {% if profile_data.get('startup_stage') == 'early' %}selected{% endif %}>Early Stage</option>
                                            <option value="growth" {% if profile_data.get('startup_stage') == 'growth' %}selected{% endif %}>Growth Stage</option>
                                            <option value="expansion" {% if profile_data.get('startup_stage') == 'expansion' %}selected{% endif %}>Expansion Stage</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="annual_turnover" class="form-label">Annual Turnover (Rs)</label>
                                        <input type="number" class="form-control" id="annual_turnover" name="annual_turnover" min="0"
                                               value="{{ profile_data.get('annual_turnover', '') }}" 
                                               placeholder="Enter 0 if not applicable">
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="funding_needs" class="form-label">Funding Required (Rs)</label>
                                        <input type="number" class="form-control" id="funding_needs" name="funding_needs" min="0"
                                               value="{{ profile_data.get('funding_needs', '') }}" required>
                                    </div>
                                </div>
                            </div>
                        {% endif %}

                        <div class="d-grid">
                            <button type="submit" class="btn btn-{% if role == 'student' %}primary{% else %}success{% endif %} btn-lg">
                                <i class="fas fa-save me-2"></i>Save Profile
                            </button>
                        </div>
                    </form>

                    <div class="text-center mt-3">
                        {% if role == 'student' %}
                            <p class="text-muted">Want to explore funding opportunities? 
                                <a href="{{ url_for('switch_role', new_role='entrepreneur') }}">Switch to Entrepreneur</a>
                            </p>
                        {% else %}
                            <p class="text-muted">Looking for scholarships instead? 
                                <a href="{{ url_for('switch_role', new_role='student') }}">Switch to Student</a>
                            </p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
